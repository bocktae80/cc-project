# 예제: & prefix로 백그라운드 작업 실행

> 오래 걸리는 리팩토링을 클라우드에 맡기고, 나는 다른 작업을 계속하기

---

## 실습 목표

```
[터미널]
    |
    |--- & 전체 리팩토링 맡기기
    |        |
    |        v
    |    [클라우드에서 실행]
    |
    |--- 다른 작업 계속!
    |
    |--- /tp로 결과 가져오기
    |
    v
  [완료!]
```

---

## 시나리오

프로젝트에 TypeScript 파일이 50개 있습니다. 모든 파일에서:
- `any` 타입을 `unknown`으로 변경
- 누락된 반환 타입 추가
- 사용하지 않는 import 제거

이 작업은 시간이 꽤 걸릴 수 있어요. 클라우드에 맡기고 다른 일을 하면 효율적이겠죠?

---

## 단계별 실습

### Phase 1: 클라우드로 보내기 (1분)

```bash
# Claude Code 터미널에서:
> & src/ 폴더의 모든 TypeScript 파일을 분석하고 다음을 수행해줘:
  1. any 타입을 구체적인 타입으로 변경
  2. 누락된 함수 반환 타입 추가
  3. 사용하지 않는 import 제거
  변경한 내용을 파일별로 정리해서 보여줘
```

### 예상 출력

```
Sending task to cloud...

Task sent successfully!
Session ID: ses_refactor_001

View progress: https://claude.ai/chat/ses_refactor_001

>
```

터미널이 바로 돌아왔어요!

### Phase 2: 다른 작업 진행 (자유 시간)

터미널이 자유로우니 다른 작업을 할 수 있어요:

```bash
# 다른 작업 예시:
> git log --oneline -10
> README.md에 새로운 기능 설명을 추가해줘
> 오늘 할 일 목록을 정리해줘
```

중간에 claude.ai 웹에서 진행 상황을 확인할 수도 있어요.

### Phase 3: 결과 가져오기 (1분)

```bash
# 작업이 완료된 것을 확인한 후:
> /tp

Available sessions:
  1. [ses_refactor_001] "TypeScript 리팩토링" (completed)

Select a session: 1
```

### 예상 결과

```
Teleporting session...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

리팩토링 결과 요약:

분석 파일: 50개
변경 파일: 23개

파일별 변경 내용:
1. src/utils/date.ts
   - any → Date (3곳)
   - 반환 타입 추가: formatDate(): string

2. src/api/client.ts
   - any → unknown (5곳)
   - 미사용 import 제거: lodash
   ...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

> _
```

---

## & prefix vs 일반 실행 — 언제 어떤 걸?

| 상황 | 일반 실행 | & prefix |
|------|----------|----------|
| 간단한 질문 | O | X (과함) |
| 파일 1개 수정 | O | X (과함) |
| 파일 10개+ 분석 | 가능하지만 기다려야 함 | O (추천) |
| 전체 코드 리팩토링 | 오래 걸림 | O (강력 추천) |
| 터미널 닫아야 할 때 | 작업 중단됨 | O (필수) |
| 여러 작업 동시에 | 불가 | O (가능) |

### 판단 기준

```
질문: 이 작업이 5분 이상 걸릴까?
|
|-- 예 → & prefix 추천
|   |
|   |-- 터미널을 닫아야 하나?
|   |   |-- 예 → & prefix 필수!
|   |   |-- 아니요 → 선택 (& 쓰면 다른 작업 가능)
|
|-- 아니요 → 일반 실행
```

---

## 여러 작업 동시에 보내기

`&` prefix를 여러 번 사용하면 여러 작업을 동시에 실행할 수 있어요:

```bash
# 작업 1: 코드 분석
> & src/ 폴더의 아키텍처를 분석하고 다이어그램을 그려줘

# 작업 2: 테스트 생성
> & 모든 유틸 함수에 대한 단위 테스트를 작성해줘

# 작업 3: 문서 생성
> & API 엔드포인트 문서를 Markdown으로 작성해줘
```

```
Session 1: ses_arch_001 (아키텍처 분석)
Session 2: ses_test_001 (테스트 생성)
Session 3: ses_docs_001 (문서 생성)

3개 작업이 동시에 클라우드에서 실행 중!
```

나중에 각각 `/tp`로 가져오면 됩니다.

---

## 학습 포인트

이 예제를 통해 배운 것:

1. **& prefix**: 프롬프트 앞에 `&`만 붙이면 클라우드 실행
2. **터미널 자유**: 작업을 보내면 터미널에서 다른 작업 가능
3. **결과 가져오기**: `/tp`로 완료된 작업을 로컬에서 확인
4. **동시 실행**: 여러 작업을 동시에 보낼 수 있음

> 핵심 교훈: 시간이 오래 걸리는 작업은 **보내놓고 다른 일 하기!**
> 컴퓨터가 일하는 동안 커피 한 잔 마시세요.
