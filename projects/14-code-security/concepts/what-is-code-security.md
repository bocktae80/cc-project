# 코드 보안이란? — AI 보안 경비원

> 코드에도 "문 잠금"이 필요하다는 이야기

---

## 비유: CCTV vs AI 경비원

학교를 지킨다고 상상해보세요.

```
CCTV (기존 보안 도구)
─────────────────────────────────────────
       [CCTV 1]        [CCTV 2]
          |                |
          v                v
       정문 감시         후문 감시

  +-----------+     +-----------+
  | 규칙 목록  |     | 규칙 목록  |
  +-----------+     +-----------+
  | 1. 교복X   |     | 1. 교복X   |
  | 2. 무기소지 |     | 2. 무기소지 |
  | 3. 출입증X  |     | 3. 출입증X  |
  +-----------+     +-----------+

  규칙에 없는 행동 → 그냥 통과!
  예: 출입증 빌려서 들어오기 → 감지 못함
```

```
AI 경비원 (Claude 보안 스캔)
─────────────────────────────────────────
       [AI 경비원]
          |
          v
     건물 전체를 순찰

  +-----------------+
  |   상황 판단     |
  +-----------------+
  | "저 사람은      |
  |  출입증이 있지만 |
  |  행동이 수상해.  |
  |  왜 서버실 앞에  |
  |  서성이지?"     |
  +-----------------+

  맥락을 이해해서 판단!
  예: 출입증 빌려서 들어와도 → "수상하다" 감지
```

핵심 차이: CCTV는 **규칙 목록에 있는 것만** 잡지만, AI 경비원은 **"왜 저런 행동을 하지?"** 하고 추론합니다.

---

## 왜 코드에 "약점"이 생길까?

집을 지을 때를 생각해보세요:

```
완벽해 보이는 집인데...

   +------------------+
   |   우리 웹사이트   |
   |                  |
   |  [로그인 창]      |  ← 정문: 비밀번호로 잠김
   |  [게시판]         |  ← 근데 게시판에 함정을 심을 수 있다면?
   |  [검색]           |  ← 검색창에 명령어를 넣으면?
   |  [마이페이지]     |  ← 남의 페이지를 볼 수 있다면?
   |                  |
   +------------------+

문제: 개발할 때 "정상적인 사용"만 생각하고,
     "악의적인 사용"은 깜빡하는 경우가 많아요!
```

보안 취약점이 생기는 이유:
1. **깜빡함**: 문 잠그는 걸 잊은 것처럼, 입력 검증을 빠뜨림
2. **모르는 것**: 이런 공격이 가능한지 몰랐음
3. **귀찮음**: "설마 이런 걸 악용하겠어?" 하고 넘어감
4. **복잡함**: 코드가 복잡해지면 어디가 뚫려있는지 파악이 어려움

---

## OWASP Top 10 — 가장 흔한 보안 약점

**OWASP**(오와스프)는 웹 보안을 연구하는 세계적인 단체입니다. 매년 "가장 흔한 보안 약점 10가지"를 발표해요.

중학생도 이해할 수 있게 설명하면:

### 1. SQL 인젝션 — 택배 주소에 "문 열어" 적기

```
정상 사용자: 검색창에 "고양이" 입력
→ DB에서 "고양이" 검색

공격자: 검색창에 "고양이'; DROP TABLE users;--" 입력
→ DB에서 검색 + 사용자 테이블 삭제!

비유: 택배 주소란에 "집 앞 / 그리고 금고 열어줘"라고 적는 것
     택배 기사가 주소만 읽어야 하는데, 명령까지 실행해버림
```

### 2. XSS (크로스 사이트 스크립팅) — 게시판에 함정 심기

```
정상 사용자: 게시판에 "안녕하세요!" 글 작성
→ 다른 사람이 읽음

공격자: 게시판에 "<script>비밀번호훔치기()</script>" 작성
→ 글을 읽은 사람의 브라우저에서 악성 코드 실행!

비유: 교실 게시판에 "이 QR코드 찍어봐!"라고 붙여놓고,
     찍으면 개인정보가 빠져나가는 것
```

### 3. 인증 우회 — 이름표 없이 교무실 들어가기

```
정상: 로그인 → 토큰 발급 → 토큰으로 페이지 접근
공격: 토큰 없이 URL 직접 입력 → 접근 가능?!

비유: 학교에서 이름표를 확인해야 하는데,
     뒷문으로 들어오면 아무도 안 물어보는 것
```

### 4. 안전하지 않은 데이터 노출 — 일기장을 투명 가방에 넣기

```
문제: 비밀번호를 암호화하지 않고 저장
→ 해커가 DB를 훔치면 비밀번호가 그대로 보임!

비유: 비밀 일기를 투명 가방에 넣고 다니면
     누구나 읽을 수 있는 것
```

### 5. 접근 제어 실패 — 학생이 성적 수정하기

```
문제: "내 성적 보기" 페이지에서 URL의 학번만 바꾸면
     다른 학생의 성적도 볼 수 있음

/grades?student=12345  ← 내 성적
/grades?student=12346  ← 옆 친구 성적 (이게 되면 안 됨!)

비유: 시험지 보관함에 자물쇠는 있는데,
     누가 열어도 확인을 안 하는 것
```

### 6. 보안 설정 오류 — 공사 끝났는데 비계를 안 치운 것

```
문제: 개발 중에 쓰던 디버그 모드를 켜놓은 채 출시
→ 에러 메시지에 DB 비밀번호, 파일 경로 등이 노출!

비유: 건물 공사가 끝났는데 비계(발판)를 안 치워서
     아무나 건물 안으로 올라갈 수 있는 것
```

---

## AI 보안 스캔은 어떻게 다를까?

```
기존 도구의 스캔 방식:
─────────────────────────────────────
코드:  const query = "SELECT * FROM users WHERE name = '" + input + "'"
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
규칙:  "문자열 연결로 SQL 쿼리 생성" → 패턴 매칭!
결과:  경고: SQL 인젝션 가능성

AI의 스캔 방식:
─────────────────────────────────────
코드 전체를 읽고:
1. "이 함수는 사용자 입력(input)을 받고 있군"
2. "이 입력이 어디서 왔는지 추적해보자..."
3. "HTTP 요청의 body에서 왔네. 외부 입력이다"
4. "이걸 검증 없이 SQL 쿼리에 직접 넣고 있어"
5. "그리고 에러 처리도 없어서 공격 성공 여부도 알려줄 수 있겠다"
결과:  경고: SQL 인젝션 + 정보 노출 + 에러 처리 부재 (복합 취약점)
```

| 비교 | 기존 도구 (CCTV) | AI 스캔 (경비원) |
|------|-----------------|----------------|
| 작동 방식 | 패턴 매칭 (규칙 목록) | 맥락 이해 (추론) |
| 장점 | 빠름, 일관적 | 새로운 취약점 발견 가능 |
| 단점 | 규칙에 없으면 못 찾음 | 느림, 가끔 오탐 |
| 비유 | 단어 검색 (Ctrl+F) | 문장을 읽고 의미를 파악 |

---

## 다음 단계

- [AI vs 기존 스캔 비교](./ai-vs-traditional-scan.md) — 두 접근법을 더 자세히 비교
- [Step 1: 취약점 이해하기](../tutorial/step-01-understand-vulns.md) — 코드로 직접 살펴보기
