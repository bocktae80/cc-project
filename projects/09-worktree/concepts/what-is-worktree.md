# 워크트리란 무엇인가? ⭐

> 과학 실험실에서 위험한 실험을 하듯, 코드도 별도 공간에서 안전하게 실험할 수 있습니다.

---

## 워크트리(Worktree)가 뭔가요?

Git이 만들어주는 **별도의 작업 폴더**입니다.

보통 Git 저장소에는 작업 폴더가 **하나**뿐이에요.
워크트리를 쓰면 같은 저장소의 작업 폴더를 **여러 개** 만들 수 있습니다.

```
일반적인 경우:                      워크트리를 쓰면:

  my-project/  ← 폴더 1개          my-project/        ← 원본 (메인)
  ├── src/                         ├── src/
  ├── test/                        └── test/
  └── ...
                                   .claude/worktrees/
                                   └── my-experiment/  ← 복사본 (실험용)
                                       ├── src/
                                       └── test/
```

**핵심:** 원본 폴더와 실험 폴더가 **동시에 존재**합니다. 서로 영향을 주지 않아요.

---

## 왜 필요한가요?

### 문제 상황

코드를 대대적으로 수정하고 싶은데...

- "잘못되면 어떡하지?"
- "원래대로 돌아갈 수 있을까?"
- "수정하는 동안 원본은 건드리고 싶지 않은데..."

### 워크트리의 해결 방법

원본은 그대로 두고, **복사본에서 실험**합니다.

- 성공하면 결과를 원본에 반영
- 실패하면 복사본만 버리면 끝

---

## 과학 실험실 비유

```
교실 (= 저장소 전체)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  나의 책상 (= 메인 작업 폴더)
  ┌─────────────────────────────────┐
  │                                 │
  │   교과서    노트    필기구       │  ← 평소 작업하는 곳
  │                                 │     항상 깔끔하게 유지!
  └─────────────────────────────────┘

         │ "위험한 실험은 실험실에서!"
         v

  실험실 (= 워크트리)
  ┌─────────────────────────────────┐
  │                                 │
  │   교과서    노트    필기구       │  ← 복사본으로 실험
  │   (복사)   (복사)               │     폭발해도 OK!
  │   + 실험 장비                    │
  └─────────────────────────────────┘
```

### 비유 대응표

| 과학 실험실 | 워크트리 |
|------------|---------|
| 교실 | Git 저장소 |
| 나의 책상 | 메인 작업 폴더 (main 브랜치) |
| 실험실 | 워크트리 (.claude/worktrees/) |
| 실험 재료 복사 | 코드 파일 복사 |
| 실험 성공 → 보고서 제출 | 변경사항 머지 (merge) |
| 실험 실패 → 정리하고 끝 | 워크트리 삭제 |
| 실험실이 폭발해도 교실은 안전 | 워크트리에서 뭘 해도 원본은 안전 |

---

## 클로드 코드에서의 워크트리

클로드 코드는 워크트리를 특별히 쉽게 만들어줍니다.

### 실행 방법

```bash
# 방법 1: 플래그 사용
claude --worktree

# 방법 2: 짧은 형태
claude -w
```

이 명령을 실행하면:

1. `.claude/worktrees/` 폴더 안에 **새 작업 폴더**가 생김
2. 현재 코드(HEAD)를 기준으로 **새 브랜치**가 자동 생성됨
3. 클로드가 **워크트리 안에서** 작업을 시작함
4. 세션이 끝나면 "워크트리를 유지할까요, 삭제할까요?" 물어봄

### 워크트리 저장 위치

```
my-project/                         ← 원본 프로젝트
├── .claude/
│   └── worktrees/
│       └── abc123/                 ← 워크트리 (자동 생성된 이름)
│           ├── src/
│           ├── test/
│           └── ...                 ← 원본과 동일한 파일 구조
├── src/
├── test/
└── ...
```

> **이름:** 워크트리 이름은 자동 생성됩니다. `claude -w` 실행 시 랜덤 이름이 붙어요.

---

## 워크트리의 규칙

| 규칙 | 설명 |
|------|------|
| Git 저장소 필수 | `git init`이 되어 있는 프로젝트에서만 사용 가능 |
| 브랜치 자동 생성 | 워크트리마다 새 브랜치가 만들어짐 |
| 완전한 격리 | 워크트리에서의 변경이 원본에 영향 없음 |
| 세션 종료 시 선택 | 유지 또는 삭제를 선택할 수 있음 |
| 여러 개 가능 | 동시에 여러 워크트리를 만들 수 있음 |

---

## 정리

```
워크트리 = Git이 만들어주는 별도의 작업 폴더

  사용 시기: 위험한 변경, 실험적 기능, 대규모 리팩토링
  핵심 가치: 원본 코드의 안전한 보존
  실행 방법: claude --worktree (또는 claude -w)
  저장 위치: .claude/worktrees/
```

---

## 다음으로 읽기

- [브랜치 전환 vs 워크트리](worktree-vs-branch.md) — 두 방식은 어떻게 다를까?
